<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>storefrontapp documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">storefrontapp documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li >AuthHttpHeaderService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/core/src/auth/user-auth/services/auth-http-header.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Extendable service for <code>AuthInterceptor</code>.</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#refreshToken$" >refreshToken$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#refreshTokenTrigger$" >refreshTokenTrigger$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#stopProgress$" >stopProgress$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#subscriptions" >subscriptions</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#token$" >token$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#tokenToRetryRequest$" >tokenToRetryRequest$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#alterRequest" >alterRequest</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#createAuthorizationHeader" >createAuthorizationHeader</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#createNewRequestWithNewToken" >createNewRequestWithNewToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getAuthorizationHeader" >getAuthorizationHeader</a>
                            </li>
                            <li>
                                <a href="#getStableToken" >getStableToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getValidToken" >getValidToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleExpiredAccessToken" >handleExpiredAccessToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleExpiredRefreshToken" >handleExpiredRefreshToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#isOccUrl" >isOccUrl</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#shouldAddAuthorizationHeader" >shouldAddAuthorizationHeader</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#shouldCatchError" >shouldCatchError</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(authService: <a href="../injectables/AuthService.html" target="_self">AuthService</a>, authStorageService: <a href="../injectables/AuthStorageService.html" target="_self">AuthStorageService</a>, oAuthLibWrapperService: <a href="../injectables/OAuthLibWrapperService.html" target="_self">OAuthLibWrapperService</a>, routingService: <a href="../injectables/RoutingService.html" target="_self">RoutingService</a>, occEndpoints: <a href="../injectables/OccEndpointsService.html" target="_self">OccEndpointsService</a>, globalMessageService: <a href="../injectables/GlobalMessageService.html" target="_self">GlobalMessageService</a>, authRedirectService: <a href="../injectables/AuthRedirectService.html" target="_self">AuthRedirectService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="108" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:108</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>authService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthService.html" target="_self" >AuthService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>authStorageService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthStorageService.html" target="_self" >AuthStorageService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>oAuthLibWrapperService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/OAuthLibWrapperService.html" target="_self" >OAuthLibWrapperService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>routingService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/RoutingService.html" target="_self" >RoutingService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>occEndpoints</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/OccEndpointsService.html" target="_self" >OccEndpointsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>globalMessageService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/GlobalMessageService.html" target="_self" >GlobalMessageService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>authRedirectService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthRedirectService.html" target="_self" >AuthRedirectService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="alterRequest"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>alterRequest</b></span>
                        <a href="#alterRequest"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>alterRequest(request: HttpRequest<any>, token?: <a href="../interfaces/AuthToken.html" target="_self">AuthToken</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="141"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:141</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Adds <code>Authorization</code> header for OCC calls.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>token</td>
                                    <td>
                                                <code><a href="../interfaces/AuthToken.html" target="_self" >AuthToken</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>HttpRequest&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createAuthorizationHeader"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>createAuthorizationHeader</b></span>
                        <a href="#createAuthorizationHeader"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createAuthorizationHeader(token?: <a href="../interfaces/AuthToken.html" target="_self">AuthToken</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="166"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:166</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>token</td>
                                    <td>
                                                <code><a href="../interfaces/AuthToken.html" target="_self" >AuthToken</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type | literal type</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createNewRequestWithNewToken"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>createNewRequestWithNewToken</b></span>
                        <a href="#createNewRequestWithNewToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createNewRequestWithNewToken(request: HttpRequest<any>, token: <a href="../interfaces/AuthToken.html" target="_self">AuthToken</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="284"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:284</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>token</td>
                                    <td>
                                                <code><a href="../interfaces/AuthToken.html" target="_self" >AuthToken</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>HttpRequest&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAuthorizationHeader"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getAuthorizationHeader</b></span>
                        <a href="#getAuthorizationHeader"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAuthorizationHeader(request: HttpRequest<any>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="161"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:161</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string | null</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStableToken"></a>
                    <span class="name">
                        <span ><b>getStableToken</b></span>
                        <a href="#getStableToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStableToken()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="239"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:239</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Emits the token or <code>undefined</code> only when the refresh or the logout processes are finished.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/AuthToken.html" target="_self" >Observable&lt;AuthToken | undefined&gt;</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getValidToken"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getValidToken</b></span>
                        <a href="#getValidToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getValidToken(requestToken: <a href="../interfaces/AuthToken.html" target="_self">AuthToken | undefined</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="258"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:258</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a valid access token.
It will attempt to refresh it if the current one expired; emits after the new one is retrieved.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>requestToken</td>
                                    <td>
                                                <code><a href="../interfaces/AuthToken.html" target="_self" >AuthToken | undefined</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/AuthToken.html" target="_self" >Observable&lt;AuthToken | undefined&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleExpiredAccessToken"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleExpiredAccessToken</b></span>
                        <a href="#handleExpiredAccessToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleExpiredAccessToken(request: HttpRequest<any>, next: <a href="https://angular.io/api/common/http/HttpHandler" target="_blank">HttpHandler</a>, initialToken: <a href="../interfaces/AuthToken.html" target="_self">AuthToken | undefined</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="193"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:193</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Refreshes access_token and then retries the call with the new token.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>next</td>
                                    <td>
                                                <code><a href="https://angular.io/api/common/http/HttpHandler" target="_blank" >HttpHandler</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>initialToken</td>
                                    <td>
                                                <code><a href="../interfaces/AuthToken.html" target="_self" >AuthToken | undefined</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/AuthToken.html" target="_self" >Observable&lt;HttpEvent&lt;AuthToken&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleExpiredRefreshToken"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleExpiredRefreshToken</b></span>
                        <a href="#handleExpiredRefreshToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleExpiredRefreshToken()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="211"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:211</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Logout user, redirected to login page and informs about expired session.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isOccUrl"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>isOccUrl</b></span>
                        <a href="#isOccUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isOccUrl(url: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="157"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:157</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>url</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="296"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:296</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="shouldAddAuthorizationHeader"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>shouldAddAuthorizationHeader</b></span>
                        <a href="#shouldAddAuthorizationHeader"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>shouldAddAuthorizationHeader(request: HttpRequest<any>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="132"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:132</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="shouldCatchError"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>shouldCatchError</b></span>
                        <a href="#shouldCatchError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>shouldCatchError(request: HttpRequest<any>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="128"
                            class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:128</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks if request should be handled by this service (if it&#39;s OCC call).</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="refreshToken$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>refreshToken$</b></span>
                        <a href="#refreshToken$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.refreshTokenTrigger$.pipe(
    withLatestFrom(
      this.authService.refreshInProgress$,
      this.authService.logoutInProgress$
    ),
    filter(
      ([, refreshInProgress, logoutInProgress]) &#x3D;&gt;
        !refreshInProgress &amp;&amp; !logoutInProgress
    ),
    tap(([token]) &#x3D;&gt; {
      if (token?.refresh_token) {
        this.oAuthLibWrapperService.refreshToken();
        this.authService.setRefreshProgress(true);
      } else {
        this.handleExpiredRefreshToken();
      }
    })
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="80" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:80</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Refreshes the token only if currently there&#39;s no refresh nor logout in progress.
If the refresh token is not present, it triggers the logout process</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="refreshTokenTrigger$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>refreshTokenTrigger$</b></span>
                        <a href="#refreshTokenTrigger$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;AuthToken&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:51</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Starts the refresh of the access token</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stopProgress$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>stopProgress$</b></span>
                        <a href="#stopProgress$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.token$.pipe(
    // Keeps the previous and the new token
    pairwise(),
    tap(([oldToken, newToken]) &#x3D;&gt; {
      // if we got the new token we know that either the refresh or logout finished
      if (oldToken?.access_token !&#x3D;&#x3D; newToken?.access_token) {
        this.authService.setLogoutProgress(false);
        this.authService.setRefreshProgress(false);
      }
    })
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:64</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Compares the previous and the new token in order to stop the refresh or logout processes</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="subscriptions"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>subscriptions</b></span>
                        <a href="#subscriptions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subscription()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="108" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:108</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="token$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>token$</b></span>
                        <a href="#token$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/AuthToken.html" target="_self" >Observable&lt;AuthToken | undefined&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.authStorageService
    .getToken()
    .pipe(map((token) &#x3D;&gt; (token?.access_token ? token : undefined)))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="57" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:57</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Internal token streams which reads the latest from the storage.
Emits the token or <code>undefined</code></p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tokenToRetryRequest$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>tokenToRetryRequest$</b></span>
                        <a href="#tokenToRetryRequest$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>using(
    () &#x3D;&gt; this.refreshToken$.subscribe(),
    () &#x3D;&gt; this.getStableToken()
  ).pipe(shareReplay({ refCount: true, bufferSize: 1 }))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="103" class="link-to-prism">projects/core/src/auth/user-auth/services/auth-http-header.service.ts:103</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Kicks of the process by listening to the new token and refresh token processes.
This token should be used when retrying the failed http request.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpEvent, HttpHandler, HttpRequest } from &#x27;@angular/common/http&#x27;;
import { Injectable, OnDestroy } from &#x27;@angular/core&#x27;;
import {
  combineLatest,
  defer,
  EMPTY,
  Observable,
  queueScheduler,
  Subject,
  Subscription,
  using,
} from &#x27;rxjs&#x27;;
import {
  filter,
  map,
  observeOn,
  pairwise,
  shareReplay,
  skipWhile,
  switchMap,
  take,
  tap,
  withLatestFrom,
} from &#x27;rxjs/operators&#x27;;
import { GlobalMessageService } from &#x27;../../../global-message/facade/global-message.service&#x27;;
import { GlobalMessageType } from &#x27;../../../global-message/models/global-message.model&#x27;;
import { OccEndpointsService } from &#x27;../../../occ/services/occ-endpoints.service&#x27;;
import { RoutingService } from &#x27;../../../routing/facade/routing.service&#x27;;
import { AuthService } from &#x27;../facade/auth.service&#x27;;
import { AuthToken } from &#x27;../models/auth-token.model&#x27;;
import { AuthRedirectService } from &#x27;./auth-redirect.service&#x27;;
import { AuthStorageService } from &#x27;./auth-storage.service&#x27;;
import { OAuthLibWrapperService } from &#x27;./oauth-lib-wrapper.service&#x27;;

/**
 * Extendable service for &#x60;AuthInterceptor&#x60;.
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class AuthHttpHeaderService implements OnDestroy {
  /**
   * Starts the refresh of the access token
   */
  protected refreshTokenTrigger$ &#x3D; new Subject&lt;AuthToken&gt;();

  /**
   * Internal token streams which reads the latest from the storage.
   * Emits the token or &#x60;undefined&#x60;
   */
  protected token$: Observable&lt;AuthToken | undefined&gt; &#x3D; this.authStorageService
    .getToken()
    .pipe(map((token) &#x3D;&gt; (token?.access_token ? token : undefined)));

  /**
   * Compares the previous and the new token in order to stop the refresh or logout processes
   */
  protected stopProgress$ &#x3D; this.token$.pipe(
    // Keeps the previous and the new token
    pairwise(),
    tap(([oldToken, newToken]) &#x3D;&gt; {
      // if we got the new token we know that either the refresh or logout finished
      if (oldToken?.access_token !&#x3D;&#x3D; newToken?.access_token) {
        this.authService.setLogoutProgress(false);
        this.authService.setRefreshProgress(false);
      }
    })
  );

  /**
   * Refreshes the token only if currently there&#x27;s no refresh nor logout in progress.
   * If the refresh token is not present, it triggers the logout process
   */
  protected refreshToken$ &#x3D; this.refreshTokenTrigger$.pipe(
    withLatestFrom(
      this.authService.refreshInProgress$,
      this.authService.logoutInProgress$
    ),
    filter(
      ([, refreshInProgress, logoutInProgress]) &#x3D;&gt;
        !refreshInProgress &amp;&amp; !logoutInProgress
    ),
    tap(([token]) &#x3D;&gt; {
      if (token?.refresh_token) {
        this.oAuthLibWrapperService.refreshToken();
        this.authService.setRefreshProgress(true);
      } else {
        this.handleExpiredRefreshToken();
      }
    })
  );

  /**
   * Kicks of the process by listening to the new token and refresh token processes.
   * This token should be used when retrying the failed http request.
   */
  protected tokenToRetryRequest$ &#x3D; using(
    () &#x3D;&gt; this.refreshToken$.subscribe(),
    () &#x3D;&gt; this.getStableToken()
  ).pipe(shareReplay({ refCount: true, bufferSize: 1 }));

  protected subscriptions &#x3D; new Subscription();

  constructor(
    protected authService: AuthService,
    protected authStorageService: AuthStorageService,
    protected oAuthLibWrapperService: OAuthLibWrapperService,
    protected routingService: RoutingService,
    protected occEndpoints: OccEndpointsService,
    protected globalMessageService: GlobalMessageService,
    protected authRedirectService: AuthRedirectService
  ) {
    // We need to have stopProgress$ stream active for the whole time,
    // so when the logout finishes we finish it&#x27;s process.
    // It could happen when retryToken$ is not active.
    this.subscriptions.add(this.stopProgress$.subscribe());
  }

  /**
   * Checks if request should be handled by this service (if it&#x27;s OCC call).
   */
  public shouldCatchError(request: HttpRequest&lt;any&gt;): boolean {
    return this.isOccUrl(request.url);
  }

  public shouldAddAuthorizationHeader(request: HttpRequest&lt;any&gt;): boolean {
    const hasAuthorizationHeader &#x3D; !!this.getAuthorizationHeader(request);
    const isOccUrl &#x3D; this.isOccUrl(request.url);
    return !hasAuthorizationHeader &amp;&amp; isOccUrl;
  }

  /**
   * Adds &#x60;Authorization&#x60; header for OCC calls.
   */
  public alterRequest(
    request: HttpRequest&lt;any&gt;,
    token?: AuthToken
  ): HttpRequest&lt;any&gt; {
    const hasAuthorizationHeader &#x3D; !!this.getAuthorizationHeader(request);
    const isOccUrl &#x3D; this.isOccUrl(request.url);
    if (!hasAuthorizationHeader &amp;&amp; isOccUrl) {
      return request.clone({
        setHeaders: {
          ...this.createAuthorizationHeader(token),
        },
      });
    }
    return request;
  }

  protected isOccUrl(url: string): boolean {
    return url.includes(this.occEndpoints.getBaseUrl());
  }

  protected getAuthorizationHeader(request: HttpRequest&lt;any&gt;): string | null {
    const rawValue &#x3D; request.headers.get(&#x27;Authorization&#x27;);
    return rawValue;
  }

  protected createAuthorizationHeader(
    token?: AuthToken
  ): { Authorization: string } | {} {
    if (token?.access_token) {
      return {
        Authorization: &#x60;${token.token_type || &#x27;Bearer&#x27;} ${token.access_token}&#x60;,
      };
    }
    let currentToken: AuthToken | undefined;
    this.authStorageService
      .getToken()
      .subscribe((authToken) &#x3D;&gt; (currentToken &#x3D; authToken))
      .unsubscribe();

    if (currentToken?.access_token) {
      return {
        Authorization: &#x60;${currentToken.token_type || &#x27;Bearer&#x27;} ${
          currentToken.access_token
        }&#x60;,
      };
    }
    return {};
  }

  /**
   * Refreshes access_token and then retries the call with the new token.
   */
  public handleExpiredAccessToken(
    request: HttpRequest&lt;any&gt;,
    next: HttpHandler,
    initialToken: AuthToken | undefined
  ): Observable&lt;HttpEvent&lt;AuthToken&gt;&gt; {
    return this.getValidToken(initialToken).pipe(
      switchMap((token) &#x3D;&gt;
        // we break the stream with EMPTY when we don&#x27;t have the token. This prevents sending the requests with &#x60;Authorization: bearer undefined&#x60; header
        token
          ? next.handle(this.createNewRequestWithNewToken(request, token))
          : EMPTY
      )
    );
  }

  /**
   * Logout user, redirected to login page and informs about expired session.
   */
  public handleExpiredRefreshToken(): void {
    // There might be 2 cases:
    // 1. when user is already on some page (router is stable) and performs an UI action
    // that triggers http call (i.e. button click to save data in backend)
    // 2. when user is navigating to some page and a route guard triggers the http call
    // (i.e. guard loading cms page data)
    //
    // In the second case, we want to remember the anticipated url before we navigate to
    // the login page, so we can redirect back to that URL after user authenticates.
    this.authRedirectService.saveCurrentNavigationUrl();

    // Logout user
    // TODO(#9638): Use logout route when it will support passing redirect url
    this.authService.coreLogout().finally(() &#x3D;&gt; {
      this.routingService.go({ cxRoute: &#x27;login&#x27; });

      this.globalMessageService.add(
        {
          key: &#x27;httpHandlers.sessionExpired&#x27;,
        },
        GlobalMessageType.MSG_TYPE_ERROR
      );
    });
  }

  /**
   * Emits the token or &#x60;undefined&#x60; only when the refresh or the logout processes are finished.
   */
  getStableToken(): Observable&lt;AuthToken | undefined&gt; {
    return combineLatest([
      this.token$,
      this.authService.refreshInProgress$,
      this.authService.logoutInProgress$,
    ]).pipe(
      observeOn(queueScheduler),
      filter(
        ([_, refreshInProgress, logoutInProgress]) &#x3D;&gt;
          !refreshInProgress &amp;&amp; !logoutInProgress
      ),
      switchMap(() &#x3D;&gt; this.token$)
    );
  }

  /**
   * Returns a valid access token.
   * It will attempt to refresh it if the current one expired; emits after the new one is retrieved.
   */
  protected getValidToken(
    requestToken: AuthToken | undefined
  ): Observable&lt;AuthToken | undefined&gt; {
    return defer(() &#x3D;&gt; {
      // flag to only refresh token only on first emission
      let refreshTriggered &#x3D; false;
      return this.tokenToRetryRequest$.pipe(
        tap((token) &#x3D;&gt; {
          // we want to refresh the access token only when it is old.
          // this is a guard for the case when there are multiple parallel http calls
          if (
            token?.access_token &#x3D;&#x3D;&#x3D; requestToken?.access_token &amp;&amp;
            !refreshTriggered
          ) {
            this.refreshTokenTrigger$.next(token);
          }
          refreshTriggered &#x3D; true;
        }),
        skipWhile(
          (token) &#x3D;&gt; token?.access_token &#x3D;&#x3D;&#x3D; requestToken?.access_token
        ),
        take(1)
      );
    });
  }

  protected createNewRequestWithNewToken(
    request: HttpRequest&lt;any&gt;,
    token: AuthToken
  ): HttpRequest&lt;any&gt; {
    request &#x3D; request.clone({
      setHeaders: {
        Authorization: &#x60;${token.token_type || &#x27;Bearer&#x27;} ${token.access_token}&#x60;,
      },
    });
    return request;
  }

  ngOnDestroy(): void {
    this.subscriptions.unsubscribe();
  }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AuthHttpHeaderService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
